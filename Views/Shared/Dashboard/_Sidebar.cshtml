<div class="sidebar-area" id="sidebar-area">
    <div class="logo position-relative">
        <a href="/" class="d-block text-decoration-none position-relative">
            <img src="~/images/logo-icon.png" alt="logo-icon" />
            <span class="logo-text fw-bold text-dark">CorpProcure</span>
        </a>
        <button class="sidebar-burger-menu bg-transparent p-0 border-0 opacity-0 z-n1 position-absolute top-50 end-0 translate-middle-y"
                id="sidebar-burger-menu">
            <i data-feather="x"></i>
        </button>
    </div>

    <aside id="layout-menu" class="layout-menu menu-vertical menu active" data-simplebar>
        <ul class="menu-inner">
            <!-- MAIN MENU -->
            <li class="menu-title small text-uppercase">
                <span class="menu-title-text">MAIN</span>
            </li>

            <!-- Dashboard -->
            <li class="menu-item @(Context.Request.Path == "/" || Context.Request.Path == "/Home" ? "open" : "")">
                <a asp-controller="Home" asp-action="Index" class="menu-link @(Context.Request.Path == "/" || Context.Request.Path == "/Home" ? "active" : "")">
                    <span class="material-symbols-outlined menu-icon">dashboard</span>
                    <span class="title">Dashboard</span>
                </a>
            </li>

            <!-- Purchase Requests -->
            <li class="menu-item @(Context.Request.Path.StartsWithSegments("/PurchasesRequest") ? "open" : "")">
                <a href="javascript:void(0);" class="menu-link menu-toggle @(Context.Request.Path.StartsWithSegments("/PurchasesRequest") ? "active" : "")">
                    <span class="material-symbols-outlined menu-icon">shopping_cart</span>
                    <span class="title">Purchase Requests</span>
                </a>
                <ul class="menu-sub @(Context.Request.Path.StartsWithSegments("/PurchasesRequest") ? "open" : "")">
                    <li class="menu-item">
                        <a asp-controller="PurchasesRequest" asp-action="Index"
                           class="menu-link @(Context.Request.Path == "/PurchasesRequest" || Context.Request.Path == "/PurchasesRequest/Index" ? "active" : "")">
                            My Requests
                        </a>
                    </li>
                    @if (User.IsInRole("Staff") || User.IsInRole("Manager"))
                    {
                        <li class="menu-item">
                            <a asp-controller="PurchasesRequest" asp-action="Create"
                               class="menu-link @(Context.Request.Path == "/PurchasesRequest/Create" ? "active" : "")">
                                Create Request
                            </a>
                        </li>
                    }
                    @if (User.IsInRole("Manager") || User.IsInRole("Finance") || User.IsInRole("Admin"))
                    {
                        <li class="menu-item">
                            <a asp-controller="PurchasesRequest" asp-action="DepartmentRequests"
                               class="menu-link @(Context.Request.Path == "/PurchasesRequest/DepartmentRequests" ? "active" : "")">
                                Department Requests
                            </a>
                        </li>
                    }
                </ul>
            </li>

            <!-- Approvals (Manager & Finance only) -->
            @if (User.IsInRole("Manager") || User.IsInRole("Finance"))
            {
                <li class="menu-item @(Context.Request.Path == "/PurchasesRequest/PendingApprovals" ? "open" : "")">
                    <a asp-controller="PurchasesRequest" asp-action="PendingApprovals"
                       class="menu-link @(Context.Request.Path == "/PurchasesRequest/PendingApprovals" ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">task_alt</span>
                        <span class="title">
                            Pending Approvals
                            @* Optional: Add badge for pending count *@
                        </span>
                    </a>
                </li>
            }

            <!-- Purchase Orders (Procurement only) -->
            @if (User.IsInRole("Procurement") || User.IsInRole("Admin"))
            {
                <li class="menu-item @(Context.Request.Path.StartsWithSegments("/PurchasesOrder") ? "open" : "")">
                    <a asp-controller="PurchaseOrder" asp-action="Index"
                       class="menu-link @(Context.Request.Path.StartsWithSegments("/PurchasesOrder") ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">receipt_long</span>
                        <span class="title">Purchase Orders</span>
                    </a>
                </li>
            }

            <!-- BUDGET SECTION -->
            @if (User.IsInRole("Manager") || User.IsInRole("Finance") || User.IsInRole("Admin"))
            {
                <li class="menu-title small text-uppercase">
                    <span class="menu-title-text">BUDGET</span>
                </li>

                <li class="menu-item @(Context.Request.Path.StartsWithSegments("/Budget") ? "open" : "")">
                    <a asp-controller="Budget" asp-action="Index"
                       class="menu-link @(Context.Request.Path.StartsWithSegments("/Budget") ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">account_balance_wallet</span>
                        <span class="title">Budget Overview</span>
                    </a>
                </li>
            }

            <!-- REPORTS (Finance & Admin) -->
            @if (User.IsInRole("Finance") || User.IsInRole("Admin"))
            {
                <li class="menu-title small text-uppercase">
                    <span class="menu-title-text">REPORTS</span>
                </li>

                <li class="menu-item">
                    <a asp-controller="Report" asp-action="PurchaseRequestReport"
                       class="menu-link @(Context.Request.Path == "/Report/PurchaseRequestReport" ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">assessment</span>
                        <span class="title">PR Report</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a asp-controller="Report" asp-action="BudgetReport"
                       class="menu-link @(Context.Request.Path == "/Report/BudgetReport" ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">bar_chart</span>
                        <span class="title">Budget Report</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a asp-controller="Report" asp-action="ApprovalReport"
                       class="menu-link @(Context.Request.Path == "/Report/ApprovalReport" ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">timeline</span>
                        <span class="title">Approval Timeline</span>
                    </a>
                </li>
            }

            <!-- MASTER DATA (Admin only) -->
            @if (User.IsInRole("Admin"))
            {
                <li class="menu-title small text-uppercase">
                    <span class="menu-title-text">MASTER DATA</span>
                </li>

                <li class="menu-item">
                    <a asp-controller="Department" asp-action="Index"
                       class="menu-link @(Context.Request.Path.StartsWithSegments("/Department") ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">corporate_fare</span>
                        <span class="title">Departments</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a asp-controller="User" asp-action="Index"
                       class="menu-link @(Context.Request.Path.StartsWithSegments("/User") ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">group</span>
                        <span class="title">Users</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a asp-controller="Budget" asp-action="Manage"
                       class="menu-link @(Context.Request.Path == "/Budget/Manage" ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">monetization_on</span>
                        <span class="title">Budget Management</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a asp-controller="AuditLog" asp-action="Index"
                       class="menu-link @(Context.Request.Path.StartsWithSegments("/AuditLog") ? "active" : "")">
                        <span class="material-symbols-outlined menu-icon">history</span>
                        <span class="title">Audit Logs</span>
                    </a>
                </li>
            }

            <!-- PROFILE & SETTINGS -->
            <li class="menu-title small text-uppercase">
                <span class="menu-title-text">ACCOUNT</span>
            </li>

            <li class="menu-item">
                <a asp-controller="Account" asp-action="Profile"
                   class="menu-link @(Context.Request.Path == "/Account/Profile" ? "active" : "")">
                    <span class="material-symbols-outlined menu-icon">account_circle</span>
                    <span class="title">My Profile</span>
                </a>
            </li>

            <li class="menu-item">
                <a asp-controller="Account" asp-action="ChangePassword"
                   class="menu-link @(Context.Request.Path == "/Account/ChangePassword" ? "active" : "")">
                    <span class="material-symbols-outlined menu-icon">lock</span>
                    <span class="title">Change Password</span>
                </a>
            </li>

            <li class="menu-item">
                <form asp-controller="Account" asp-action="Logout" method="post" class="d-inline">
                    <button type="submit" class="menu-link border-0 bg-transparent w-100 text-start">
                        <span class="material-symbols-outlined menu-icon">logout</span>
                        <span class="title">Logout</span>
                    </button>
                </form>
            </li>
        </ul>
    </aside>
</div>
